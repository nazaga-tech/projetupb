{%load static%}


<!-- message d'erreur du formulaire -->
<style>
	h5{
		color: red;
	}
  </style>
  
  
  {% for message in messages %}
  <h5> {{message}} </h5>
  {% endfor %}
<!-- fin message erreur du formulaire -->

<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" href="{% static 'assets/connexion.css' %}">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
	<title>Login on the tdf 2022</title>
</head>
<body style="background-image:url('{% static 'assets/img/dezo.jpeg' %}');
 background-repeat:no-repeat;  
 background-size:cover;
  background-attachment:fixed; 
  color:white;">
</body>
		<form method="POST" action="{% url 'login'%}" style="max-width:480px; margin:auto;">
			<img style="border-radius: 50%;" class="mt-4 mb-1" src="{% static 'assets/img/upblogo.jpeg' %}" alt="Hestim  logo" height="72">
			<h1 class="h3 mb-2 font-weight-normal">Please Log into your account</h1>
			<label for="emailAddress" class="sr-only">Email Address</label>
			<input type="email"  id="emailAddress" class="form-control" placeholder="Enter votre email" name="email" required autofocus maxlength="30">
			<span id="email_manquant"></span>

			<label for="password" class="sr-only">Password</label>
			<input type="password" id="password" class="form-control" placeholder="Entrer votre mot de passe" name="password" required>
			<div class="checkbox">
				<label>
					<input type="checkbox" value="Remember-me">Remember-me
				</label>
			</div>
			<label for="role">Choisissez votre r√¥le:</label>
			<select name="role" id="role">
				<option value="etudiant">Etudiant</option>
				<option value="admin">Admin</option>
				<option value="professeur">professeur</option>
			</select>
			<div>
				<button id="bouton_envoie" style="background-color: blue; color: black;" class="btn btn-lg btn-primary btn-block">Log in</button>
				<a style="text-decoration: none; color: white; " href="#">i forgot my password!</a>
			</div>
			<div>
				<i class="fa fa-arrow-circle-right"></i>
				<a style="color:ghostwhite;" href="candidature.html">You don't have an account? SUSCRIBE NOW!!!</a>
			</div>
		</form>
	</div>
	<script>
		var validation = document.getElementById("bouton_envoie");
		var email = document.getElementById("emailAddress");
		var email_m = document.getElementById('email_manquant');
		var email_v = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;



		validation.addEventListener("click",fenvoie);
		function fenvoie(e){
			if(email.validity.valueMissing){
				e.preventDefault();
				email_m.textContent = 'email_manquant';
				email_m.style.color = 'red';
			}
			else if(email_v.test(email.value) == false) {
				event.preventDefault();
				email_m.textContent = 'format incorrect';
				email_m.style.color = 'orange';
			}
			else{

			}
		}
	</script>
</body>
</html>